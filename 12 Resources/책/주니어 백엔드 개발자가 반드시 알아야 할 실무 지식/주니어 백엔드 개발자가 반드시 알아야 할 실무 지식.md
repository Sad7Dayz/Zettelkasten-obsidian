# 📖주니어 백엔드 개발자가 반드시 알아야 할 실무 지식

## 📜 목차
- [[#여정을 시작하며|여정을 시작하며]]
- [[#제2장 느려진 서비스| 느려진 서비스, 어디부터 봐야 할까]]
- [[#제3장 코드와 함께 춤을|코드]]

---

## 여정을 시작하며
이 책의 서문 내용...

## 제2장: 느려진 서비스
- 🔹 처리량과 응답시간
	- 🔹 병목지점
	-  사용자의 요청을 처리하는데 걸리는 시간
	- 🔹 수직 확장과 수평확장
	- 🔹 커넥션 대기 시간
	- 🔹 최대 유후 시간, 유효성 검사, 최대 유지 시간
	- 🔹 서버 캐시
	- 🔹 적중률과 삭제 규칙
		- LRU : 가장 오래전에 사용된 데이터를 제거
		- LFU: 가장 적게 사용된 데이터를 제거
		- FIFO: 먼저 추가된 데이터를 먼저 삭제
	- 🔹 로컬 캐시와 리모트 캐시
		- 인-메모리 캐시(node-cache)
		- 리모트캐시(Redis)
	- 🔹 캐시 사전 삭제
	- 🔹 캐시 무효화
	- 🔹 가비지 컬렉터와 메모리 사용
	- 🔹 응답 데이터 압축
		- 네트워크 속도
		- 전송 데이터 크기
	- 🔹 정적 자원과 브라우저 캐시
	- 🔹 정적 자원과 CDN
	- 🔹 대기 처리

## 제3장: 성능을 좌우하는 DB 설계와 쿼리
- 🔹성능에 핵심인 DB
	-  🔹 풀스캔
- 🔹 조회 트래픽을 고려한 인덱스 설계
	- 🔹 선택도를 고려한 인덱스 칼럼 선택
- 🔹 몇가지 조회 성능 개선 방법
		-  미리 집계하기
			- 비정규화도 괜찮나요?
			- 동시성 문제는 없나요?
	- 🔹 페이지 기준 목록 조회 대신 ID 기준 목록 조회 방식 사용하기 
	- 🔹 조회 범위를 시간 시준으로 제한하기
	- 🔹 전체 개수 세지 않기
	- 🔹 오래된 데이터 삭제 및 분리 보관하기
		- 180일 로그인
	- 🔹 DB장비 확장하기
	- 🔹 별도 캐시서버 구성하기
- 🔹 알아두면 좋을 몇가지 주의 사항
	- 🔹 쿼리 타임아웃
	- 🔹 상태변경 기능은 복제DB에서 조회하지 않기
	- 🔹 배치 쿼리 실행 시간 증가
		- 커버링 인덱스 활용
		- 데이터를 일정 크기로 나눠 처리
	- 🔹 타입이 다른 칼럼 조인 주의
	- 🔹 테이블 변경은 신중하게
- 🔹 실패와 트랜잭션 고려하기

## 제4장: 외부 연동이 문제들
- 🔹 우리는 문제가 없는데
- 🔹타임아웃
- 🔹2가지 타임아웃
	- 연결 타임아웃
	- 읽기 타임아웃
- 🔹 재시도
	- 🔹 재시도 가능 조건
		- 단순 조회 기능
		- 연결 타임아웃
		- 멱등성을 가진 변경 가능
	- 🔹 재시도 횟수와 간격
		- 재시도 횟수
		- 재시도 간격
	-  🔹 재시도 폭풍 안티패턴
- 🔹 동시 요청 제한 
	- 벌크헤드
	- 동시 처리 제한
-  🔹 서킷 브레이커
	- 빠른 실패
-  🔹 외부 연동과 트랜잭션 처리
	- 외부 연동에 실패 했을때 트랜잭션을 롤백
	- 외부 연동은 성공했지만 DB연동에 실패해 트랜잭션을 롤백
	- 🔹 외부 연동이 느려 질때 DB 커넥션 풀 문제
	- 🔹 HTTP 커넥션 풀
	- 🔹 연동 서비스 이중화

## 제5장: 비동기 연동, 언제 어떻게 써야할까?
- 🔹동기 연동과 비동기연동
	- 비동기 방식의 예제
		- 푸시 서비스 연동
		- 포인트서비스 연동
		- 검색 서비스 연동
		- sms 발송 서비스 연동
- 🔹 별도 스레드로 실행하기
	- 스레드와 메모리
- 🔹 메시징
	- 메시징 시스템으 이용한 비동기 연동처리
	- 메세지 생성 측 고려사항
		- 무시한다.
		- 재시도한다.
		- 실패로그를 남긴다.
		- 메세지 생산자는 db 트랜잭션와의 연동
		- 글로벌 트랜잭션과 메시지 연동
	-  메시지 소비 측 고려사항
		- 메시지 생산자가 같은 데이터를 가진 메시지를 메시징 시스템에 두 번 전송
		- 소비자가 메시지를 처리 하는 과정에서 오류가 발생해서 메시지 재수신
	- 메시지 종류
		- 이벤트
		- 커맨드
	- 트랜잭션 아웃박스 패터
		- 실제 업무 로직에 필요한 db 변경작업을 수행한다.
		- 메시지 데이터를 아웃박스 테이블에 추가한다.
	-  아웃박스 테이블 구조
	- 배치전송
		- 송수신 주체
		- 시간
		- 경로
	-  재처리 기능 만들기
	-  CDC(change Data Capture)
		- 변경 데이터르 그대로 대상 시스템에 전파
		- 변경 데이터를 가공/ 변환해서 대상 시스템에 전파
	-  cdc와 데이터 위치
	- cdc가 유용할때 

## 제6장: 동시성, 데이터가 꼬이기 전에 잡아야한다.
- 🔹서버와 동시 실행
	- 잘못된 데이터 공유로 인한 문제 예시
	- 프로세스 수준에서의 동시 접근 제어
		- 잠금을 이용한 접근제어
			- 잠금을 획득함
			- 공유 자원에 접근(임계영역)
			- 잠금을 해제함
	- 동시 접근 제어를 위한 구성요소
	- 세마포어
	- 원자적 타입
	- 동시성 지원 컬렉션
	- DB와 동시성
		- 선점(비관적) 잠금
		- 비관점(낙관적) 잠금
	- 외부 연동과 잠금
	- 증분쿼리
- 🔹잠금 사용시 주의
	- 잠금해제하기
	- 대기시간 지정하기
	- 교착상태 피하기
-  🔹단일스레드로 처리하기
## 제7장: IO 병목, 어떻게 해결하지
- 🔹네트워크 IO와 자원 효율
- 🔹가상 스레드로 높이기
	- 네트워크 IO와 가상 스레드
	- 가상스레드와 성능
	- 가상스레드의 중요한 장점
- 🔹 논블로킹 IO로 성능 더 높이기
	- 논블로킹 IO동작 개요
	- 리액터 패턴
	- 프레임워크 사용하기
	- 논블로킹/비동기 IO와 성능
## 제8장: 실무에 꼭 필요한 보안지식
- 🔹중요한 보안
- 🔹인증과 인가
	- 인증과 토큰
		- 별도 저장소에 토큰과 사용자 식별자 정보 저장하기
		- 토큰 자체에 사용자 식별자 정보 저장하기
		- 토큰 송수신
		- 토큰보안
	- 인가와 접근제어모델
- 🔹데이터 암호화
	- 단방향 암호화
	- 값의 비교
		- salt로 보안강화하기
	- 양뱡향 암호화 
- 🔹HMAC을 이용한 데이터 검증
- 🔹방화벽으로 필요한 트래픽만 허용하기
- 🔹감사로그 남기기
- 🔹데이터 노출 줄이기
- 🔹비정상 접근처리
- 🔹시큐어 코딩
- 🔹개인보안

## 제11장: 자주 쓰는 서버 구조와 설계 패턴
- 🔹mvc패턴
- 🔹계층형 아키텍처
	- 흩어지는 도메인 로직
- 🔹DDD와 전술 패턴
- 🔹마이크로서비스 아키텍처
	- 모놀로식
	- 마이크로서비스
- 🔹이벤트 기반 아키텍처
- 🔹CQRS패턴

## 부록: DB서비스
- 🔹DB분산잠금 구현
## 결론 및 후기
주니어급에서 미들급 개발자들을 위한 책
DDD에 대한 내용은 도메인 주도 개발 시작하기를 참고
성능 테스트 K6로 가능
